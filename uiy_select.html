<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>ClubEarth - 제작 선택</title>
    <link rel="stylesheet" href="styleguide.css" />
    <link rel="stylesheet" href="style_uiy_select.css" />
  </head>
  <body>
    <main class="ipad-pro-uiy">
      <a href="uiy_simulator.html" id="next-step-link">
  <button class="button-done">
    <span class="text-wrapper">다음 스텝으로</span>
    <img
      class="frame"
      src="https://c.animaapp.com/acujdZT9/img/frame-357.svg"
      alt=""
    />
  </button>
</a>
       
      
      
        <h1 id="selection-heading" class="text-wrapper-3">
          어떤 것을 제작해 볼까요?
        </h1>
        <nav class="steps" aria-label="진행 단계">
        <img
          src="https://c.animaapp.com/acujdZT9/img/steps.svg"
          alt="4단계 중 1단계"
        />
      </nav>
        <div
          class="product-grid"
          role="radiogroup"
          aria-labelledby="selection-heading"
        >
          <article class="item-1">
            <img src="img/select_01.jpg" class="select_img">
            <label class="before">
              <input
                type="radio"
                name="product-type"
                value="card-wallet"
                class="visually-hidden"
              />
              <div class="model" role="img" aria-label="카드지갑 이미지"></div>
              <span class="div">카드지갑</span>
              <span class="button-select-before" aria-hidden="true"></span>
            </label>
          </article>
          <article class="item-2">
            <img src="img/select_02.jpg" class="select_img">
            <label class="before">
              <input
                type="radio"
                name="product-type"
                value="string-bag"
                class="visually-hidden"
              />
              <div
                class="model-2"
                role="img"
                aria-label="스트링백 이미지"
              ></div>
              <span class="div">스트링백</span>
              <span class="button-select-before" aria-hidden="true"></span>
            </label>
          </article>
          <article class="item-3">
            <img src="img/select_03.jpg" class="select_img">
            <label class="before">
              <input
                type="radio"
                name="product-type"
                value="mini-bag"
                class="visually-hidden"
              />
              <div class="img-mini-wrapper">
                <img
                  class="img-mini"
                  src="https://c.animaapp.com/acujdZT9/img/img-mini-1@2x.png"
                  alt="미니백 이미지"
                />
              </div>
              <span class="text-wrapper-2">미니백</span>
              <span class="button-select-before" aria-hidden="true"></span>
            </label>
          </article>
        </div>
      </section>
      
      <div class="top">
        <header class="header">
          <a href="index.html" aria-label="ClubEarth 홈으로 이동">
            <img class="logo" src="https://c.animaapp.com/acujdZT9/img/logo-1.svg" alt="ClubEarth" />
          </a>
          <a href="mypage.html"><p class="p">
            <span class="span">반가워요, </span>
            <span class="text-wrapper-4">부원</span>
            <span class="span">님</span>
          </p></a>
          
          <nav class="buttons" aria-label="주요 메뉴">
            <a href="mypage.html"><button class="button-mypage" aria-label="마이페이지">
              <span class="img-wrapper"
                ><img class="union" src="https://c.animaapp.com/acujdZT9/img/union-3.svg" alt=""
              /></span>
            </button></a>
            <a href="community.html"><button class="button-community" aria-label="커뮤니티">
              <img class="img-wrapper" src="https://c.animaapp.com/acujdZT9/img/icon-communityoff-2.svg" alt="" />
            </button></a>
            <a href="uiy_select.html"><button class="button-uiy" aria-label="제작하기" aria-current="page">
              <span class="img-wrapper">
                <img class="exclude" src="img/icon_uiy.png" alt="" />
              </span>
            </button></a>
            
          </nav>
        </header>
      </div>
    </main>

  </body>

  <script>
    // 1. 필요한 요소들을 선택합니다.
    const flipItems = document.querySelectorAll('.item-1, .item-2, .item-3');
    const nextStepLink = document.getElementById('next-step-link');

    // 2. 아이템 값과 실제 모델 파일명을 매핑합니다.
    const modelMap = {
      'card-wallet': 'cardcase.glb',
      'string-bag': 'stringbag.glb',
      'mini-bag': 'minibag.glb'
    };

    // 3. 아이템 클릭 이벤트를 설정합니다.
    flipItems.forEach(item => {
      item.addEventListener('click', function() {
        
        // --- [수정] 파트 1: 플립 애니메이션 (원래 로직으로 복구) ---
        
        // 1. 우선 모든 아이템에서 'is-flipped'를 제거합니다.
        flipItems.forEach(i => {
            i.classList.remove('is-flipped');
        });

        // 2. 방금 클릭한 아이템에만 'is-flipped'를 추가합니다.
        // (toggle이 아닌 add를 사용하여, 클릭 시 절대 꺼지지 않도록 보장)
        this.classList.add('is-flipped');

        // --- 파트 2: 링크 업데이트 (새 로직) ---
        const radio = this.querySelector('input[type="radio"]');
        if (radio) {
          // 라디오 버튼을 강제로 '선택' 상태로 만듭니다.
          radio.checked = true; 
          
          // 맵에서 해당 모델 파일명을 찾습니다.
          const modelFile = modelMap[radio.value];
          
          if (modelFile) {
            // '다음 스텝으로' 버튼의 링크(href)를 업데이트합니다.
            nextStepLink.href = `uiy_simulator.html?model=${modelFile}`;
          } else {
            // 일치하는 모델이 없으면 기본 페이지로 설정
            nextStepLink.href = 'uiy_simulator.html';
          }
        }
      });
    });
  </script>
</html>
    
</html>
